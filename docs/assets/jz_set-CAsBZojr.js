import{a as g}from"./axios-B4uVmeYG.js";import{d as q,r as m,C as A,i as s,a as f,c as y,b as C,k as e,l,F as k,e as j,x as z,m as c,t as G}from"./index-DMCd4jxl.js";const H={style:{display:"flex","flex-direction":"column",height:"100%"}},I={class:"dialog-footer"},P=q({__name:"jz_set",setup(J){const n=m(""),p=m(!1),x=m([]),i=m([]);A(n,(a,u)=>{V()});const V=()=>{g.get("/fastapi/api/get"+n.value).then(a=>{x.value=a.data.data[0],i.value=a.data.data})},v=m(""),b=m(""),o=m({}),D=a=>{i.value&&(o.value=Object.assign({},i.value[a]),b.value="数据库《"+n.value+"》=>修改项->《"+o.value.key+"》",v.value="修改",p.value=!0)},w=()=>{if(i.value){o.value=Object.assign({},i.value[0]);for(let a in o.value)o.value[a]="";b.value="数据库《"+n.value+"》=>新增项",v.value="新增",p.value=!0}},$=a=>{i.value[a].key&&(o.value={是否确定删除:i.value[a].key},b.value="数据库《"+n.value+"》=>删除项->《"+i.value[a].key+"》",v.value="删除",p.value=!0)},B=()=>{let a=[],u=[];for(let t in o.value)a.push(o.value[t]),u.push(t);v.value=="新增"?g.post("/fastapi/api/ins"+n.value,{formdata:a,col:u}).then(t=>{}):v.value=="修改"?g.post("/fastapi/api/update"+n.value,{formdata:a,col:u}).then(t=>{}):v.value=="删除"&&g.get("/fastapi/api/del"+n.value+"?k="+a[0]).then(t=>{}),p.value=!1,V()};return n.value="nav",(a,u)=>{const t=s("el-tab-pane"),N=s("el-tabs"),S=s("el-affix"),h=s("el-table-column"),_=s("el-button"),U=s("el-table"),F=s("el-input"),O=s("el-form-item"),T=s("el-form"),E=s("el-dialog");return f(),y(k,null,[C("div",H,[e(S,{offset:61},{default:l(()=>[e(N,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=d=>n.value=d),type:"border-card"},{default:l(()=>[e(t,{label:"导航网址",name:"nav"}),e(t,{label:"变量",name:"jz_setting"}),e(t,{label:"账号信息",name:"jz_logininfo"}),e(t,{label:"任务类型",name:"jz_tasktype"}),e(t,{label:"新客服账号",name:"new_logininfo"}),e(t,{label:"3001账号",name:"hj3001_logininfo"}),e(t,{label:"4001账号",name:"hj4001_logininfo"})]),_:1},8,["modelValue"])]),_:1}),e(U,{border:!0,"table-layout":"auto",data:i.value,style:{flex:"auto"}},{default:l(()=>[(f(!0),y(k,null,j(x.value,(d,r)=>(f(),z(h,{label:r.toString(),prop:r.toString()},null,8,["label","prop"]))),256)),e(h,{fixed:"right",width:"100",style:{"border-top":"0"}},{header:l(()=>[e(_,{link:"",type:"primary",size:"small",onClick:w},{default:l(()=>[c("点击新增行")]),_:1})]),default:l(d=>[e(_,{link:"",type:"primary",size:"small",onClick:r=>D(d.$index)},{default:l(()=>[c("修改")]),_:2},1032,["onClick"]),e(_,{link:"",type:"primary",size:"small",onClick:r=>$(d.$index)},{default:l(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e(E,{modelValue:p.value,"onUpdate:modelValue":u[2]||(u[2]=d=>p.value=d),title:b.value,width:"500px"},{footer:l(()=>[C("span",I,[e(_,{onClick:u[1]||(u[1]=d=>p.value=!1)},{default:l(()=>[c("取消")]),_:1}),e(_,{type:"primary",onClick:B},{default:l(()=>[c(G(v.value),1)]),_:1})])]),default:l(()=>[e(T,{"label-position":"right","label-width":"120px",model:o.value},{default:l(()=>[(f(!0),y(k,null,j(o.value,(d,r)=>(f(),z(O,{label:r.toString()},{default:l(()=>[e(F,{modelValue:o.value[r],"onUpdate:modelValue":L=>o.value[r]=L,type:"textarea",autosize:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),256))]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}});export{P as default};
